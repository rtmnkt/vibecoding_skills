# プロジェクト駆動スキル 新規作成指示書

## 概要

ドキュメントとコードの対応を維持し、機能の追跡・復旧を可能にするための開発ルールスキルを新規作成する。

## 目的

1. **ドキュメントとコードを対応させる**: 仕様書/設計書とコードの整合性を保つ
2. **機能追加時に既存機能を消されないようにする**: 意図しない機能削除を防ぐ
3. **消されても追跡復旧できるようにする**: 削除された機能を特定し復元可能に

## 性質

- **主体性なし**: 開発ルール集であり、自律的に動作するスキルではない
- **任意参照**: タスクスキル等が「開発作業を行う」際に参照する判断になる
- **Spec-Driven Development的**: 要件定義からの開発を支援

## 依存関係

```
タスクスキル（任意で参照）→ プロジェクト駆動スキル
プロジェクトリーダースキル → プロジェクト駆動スキル
```

このスキルは他スキルに依存しない。

## 設計から検討すべき項目

### 1. ドキュメントとコードの対応方法

検討ポイント:
- どのような形式で対応関係を記述するか
- 手動管理 vs 自動検出
- 粒度（ファイル単位? 関数単位? 機能単位?）

参考アプローチ:
- ドキュメント内にコード参照を埋め込む
- コード内にドキュメント参照をコメントで記述
- 対応表を別ファイルで管理
- ディレクトリ構造で暗黙的に対応

### 2. 既存機能削除の防止方法

検討ポイント:
- 「機能」の定義と列挙方法
- 削除検出のタイミング（コミット時? PR時? 定期チェック?）
- 意図的削除と誤削除の区別

参考アプローチ:
- 機能一覧ファイルを管理
- テストカバレッジで機能存在を保証
- コード変更時にドキュメント更新を強制

### 3. 追跡・復旧の仕組み

検討ポイント:
- 何を追跡するか（コード? ドキュメント? 両方?）
- どこまで遡れるようにするか
- 復旧の具体的手順

参考アプローチ:
- git履歴を活用
- 機能ごとのスナップショット
- 変更ログの構造化

### 4. スキルの形式

検討ポイント:
- SKILL.md本体に全て記載 vs referencesに分割
- チェックリスト形式 vs ガイドライン形式
- 具体例の充実度

## 想定される使われ方

```
# タスクスキル使用中のagent

「機能Xを追加する」というタスクを実行中...
↓
プロジェクト駆動スキルを参照
↓
1. 機能Xに対応するドキュメントを先に作成/更新
2. ドキュメントに基づいてコードを実装
3. 対応関係を記録
4. 既存機能への影響がないか確認
```

## 制約

- 具体的な仕組みは前回の会話で未議論
- 設計から検討し、提案すること
- 機械的強制は将来課題、まずは信頼ベースのルール集として

## 参考

- Spec-Driven Development
- Documentation as Code
- Living Documentation
